from application import app
from util import session_manager
from flask import request
import json

# X. Login(Create Session)
@app.route("/login", methods=['POST'])
def loginToPEP():
    def parseRequest():
        content = json.loads(request.get_data(), encoding="utf-8")    
        userId = content.get("userId")
        sessionKey = content.get("sessionKey") # Generated by Platform Manager
        return (userId, sessionKey)
    
    userId, sessionKey = parseRequest()
    result = session_manager.login(userId, sessionKey)
    return result